<template>
    <li class="pc-item pc-caption">
        <label class="adaptive-content">Navigation</label>
    </li>
    <li class="pc-item">
        <a href="/home" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">home</i></span><span
            class="pc-mtext">Home</span></a>
    </li>
    <li class="pc-item">
        <a href="/" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">home</i></span><span
            class="pc-mtext">Dashboard</span></a>
    </li>
    <li class="pc-item pc-caption">
        <label class="adaptive-content">Elements</label>
        <span class="adaptive-content">UI Components</span>
    </li>
    <li class="pc-item pc-hasmenu adaptive-content">
        <a href="#!" class="pc-link "><span class="pc-micon"><i
            class="material-icons-two-tone">business_center</i></span><span class="pc-mtext">Basic</span><span
            class="pc-arrow"><i data-feather="chevron-right"></i></span></a>
        <ul class="pc-submenu">
            <li class="pc-item"><a class="pc-link" href="bc_alert">Alert</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_button">Button</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_badges">Badges</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_breadcrumb-pagination">Breadcrumb & paggination</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_card">Cards</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_collapse">Collapse</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_carousel">Carousel</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_progress">Progress</a></li>
            <li class="pc-item"><a class="pc-link" href="bc_modal">Modal</a></li>

            <li class="pc-item"><a class="pc-link" href="bc_typography">Typography</a></li>
        </ul>
    </li>
    <li class="pc-item">
        <a href="icon-feather" class="pc-link "><span class="pc-micon"><i
            class="material-icons-two-tone">history_edu</i></span><span class="pc-mtext">Icons</span></a>
    </li>
    <li class="pc-item pc-caption">
        <label class="adaptive-content">Forms</label>
    </li>
    <li class="pc-item pc-hasmenu adaptive-content">
        <a href="#!" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">edit</i></span><span
            class="pc-mtext">Forms Elements</span><span class="pc-arrow"><i data-feather="chevron-right"></i></span></a>
        <ul class="pc-submenu">
            <li class="pc-item"><a class="pc-link" href="form_elements">Form Basic</a></li>
            <li class="pc-item"><a class="pc-link" href="form2_input_group">Input Groups</a></li>
            <li class="pc-item"><a class="pc-link" href="form2_checkbox">Checkbox</a></li>
            <li class="pc-item"><a class="pc-link" href="form2_radio">Radio</a></li>
        </ul>
    </li>
    <li class="pc-item pc-caption">
        <label class="adaptive-content">table</label>
    </li>
    <li class="pc-item">
        <a href="tbl_bootstrap" class="pc-link "><span class="pc-micon"><i
            class="material-icons-two-tone">table_rows</i></span><span class="pc-mtext">Bootstrap table</span></a>
    </li>
    <li class="pc-item pc-caption adaptive-content">
        <label>Chart & Maps</label>
        <span>Tones of readymade charts</span>
    </li>
    <li class="pc-item adaptive-content">
        <a href="chart-apex" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">bubble_chart</i></span><span
            class="pc-mtext">Chart</span></a>
    </li>
    <li class="pc-item adaptive-content">
        <a href="map-google" class="pc-link "><span class="pc-micon"><i class="material-icons-two-tone">my_location</i></span><span
            class="pc-mtext">Maps</span></a>
    </li>
    <li class="pc-item pc-caption adaptive-content">
        <label>Pages</label>
        <span>Redymade Pages</span>
    </li>
    <li class="pc-item pc-hasmenu adaptive-content">
        <a href="#!" class="pc-link"><span class="pc-micon"><i class="material-icons-two-tone">https</i></span><span
            class="pc-mtext">Authentication</span><span class="pc-arrow"><i data-feather="chevron-right"></i></span></a>
        <ul class="pc-submenu">
            <li class="pc-item"><a class="pc-link" href="auth-signup" target="_blank">Sign up</a></li>
            <li class="pc-item"><a class="pc-link" href="auth-signin" target="_blank">Sign in</a></li>
        </ul>
    </li>
    <li class="pc-item pc-caption adaptive-content">
        <label>Other</label>
        <span>Extra more things</span>
    </li>
    <li class="pc-item pc-hasmenu adaptive-content">
        <a href="#!" class="pc-link"><span class="pc-micon"><i class="material-icons-two-tone">list_alt</i></span><span
            class="pc-mtext">Menu levels</span><span class="pc-arrow"><i data-feather="chevron-right"></i></span></a>
        <ul class="pc-submenu">
            <li class="pc-item"><a class="pc-link" href="#!">Menu Level 2.1</a></li>
            <li class="pc-item pc-hasmenu">
                <a href="#!" class="pc-link">Menu level 2.2<span class="pc-arrow"><i
                    data-feather="chevron-right"></i></span></a>
                <ul class="pc-submenu">
                    <li class="pc-item"><a class="pc-link" href="#!">Menu level 3.1</a></li>
                    <li class="pc-item"><a class="pc-link" href="#!">Menu level 3.2</a></li>
                    <li class="pc-item pc-hasmenu">
                        <a href="#!" class="pc-link">Menu level 3.3<span class="pc-arrow"><i
                            data-feather="chevron-right"></i></span></a>
                        <ul class="pc-submenu">
                            <li class="pc-item"><a class="pc-link" href="#!">Menu level 4.1</a></li>
                            <li class="pc-item"><a class="pc-link" href="#!">Menu level 4.2</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li class="pc-item pc-hasmenu">
                <a href="#!" class="pc-link">Menu level 2.3<span class="pc-arrow"><i
                    data-feather="chevron-right"></i></span></a>
                <ul class="pc-submenu">
                    <li class="pc-item"><a class="pc-link" href="#!">Menu level 3.1</a></li>
                    <li class="pc-item"><a class="pc-link" href="#!">Menu level 3.2</a></li>
                    <li class="pc-item pc-hasmenu">
                        <a href="#!" class="pc-link">Menu level 3.3<span class="pc-arrow"><i
                            data-feather="chevron-right"></i></span></a>
                        <ul class="pc-submenu">
                            <li class="pc-item"><a class="pc-link" href="#!">Menu level 4.1</a></li>
                            <li class="pc-item"><a class="pc-link" href="#!">Menu level 4.2</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li class="pc-item"><a href="sample-page" class="pc-link "><span class="pc-micon"><i
        class="material-icons-two-tone">storefront</i></span><span class="pc-mtext">Sample page</span></a></li>

</template>

<script>
export default {
    created() {
        let body = document.getElementsByTagName('body')[0],
            sidebar = document.getElementById('sidebar'),
            headerContent = document.getElementById('user-settings'),
            sizeScroll = window.innerWidth - document.body.offsetWidth,
            hideSidebarToggle =  document.getElementById('hide-sidebar-toggle'),
            pcHeader = document.getElementsByClassName('@headerclass')[0],
            pageHeader = document.getElementsByClassName('page-header')[0],
            pcContainer = document.getElementsByClassName('pc-container')[0],
            adaptiveItems = document.getElementsByClassName('pc-mtext'),
            adaptiveContent = document.getElementsByClassName('adaptive-content')
        ;

        const timeTransition = 'all 0.6s ease',
              sizeMinSidebar = '60px',
              sizeMaxSidebar = '280px'
        ;

        // обработчик отключения скролла страницы, когда скролится меню
        sidebar.onmouseover = function () {
            body.style.overflow = 'hidden';
            body.style.paddingRight = `${sizeScroll}px`;
            headerContent.style.paddingRight = `${sizeScroll}px`;
        }

        sidebar.onmouseout = function () {
            body.style.paddingRight = `${body.style.paddingRight.match(/\d+/)[0] - sizeScroll}px`;
            headerContent.style.paddingRight = `0`;
            body.style.overflow = 'auto';
        }

        hideSidebarToggle.onmouseover = function () {
            hideSidebarToggle.style.cursor = 'pointer';
        }

        const sidebarSizeHandler = {
            hideSidebar() {
                sidebar.style.width = sizeMinSidebar;
                hideSidebarToggle.classList.add('fa-rotate-180');
                hideSidebarToggle.style.position = 'absolute';
                hideSidebarToggle.style.right = '10px';
                hideSidebarToggle.style.top = sizeMinSidebar;
                pcHeader.style.left = sizeMinSidebar;
                pageHeader.style.left = sizeMinSidebar;
                pcContainer.style.marginLeft = 'calc(13vh - 60px)';
                for (let i of adaptiveItems) {
                    i.classList.add('d-none')
                }
                for (let i of adaptiveContent) {
                    i.classList.add('d-none')
                }
                localStorage.setItem('fullSidebar', 'false');
            }, showSidebar() {
                hideSidebarToggle.classList.remove('fa-rotate-180');
                sidebar.style.width = sizeMaxSidebar;
                hideSidebarToggle.style.position = '';
                hideSidebarToggle.style.right = '';
                hideSidebarToggle.style.top = '';
                pcHeader.style.left = sizeMaxSidebar;
                pageHeader.style.left = sizeMaxSidebar;
                pcContainer.style.marginLeft = sizeMaxSidebar;
                for (let i of adaptiveItems) {
                    i.classList.remove('d-none')
                }
                for (let i of adaptiveContent) {
                    i.classList.remove('d-none')
                }
                localStorage.setItem('fullSidebar', 'true');
            }, onLoad() {
                sidebar.style.transition = '';
                pcContainer.style.transition = '';
                pcHeader.style.transition = '';
                pageHeader.style.transition = '';
                if (localStorage.getItem('fullSidebar') === 'false') {
                    sidebarSizeHandler.hideSidebar()
                } else {
                    sidebarSizeHandler.showSidebar()
                }
            }, onClick() {
                sidebar.style.transition = timeTransition;
                pcContainer.style.transition = timeTransition;
                pcHeader.style.transition = timeTransition;
                pageHeader.style.transition = timeTransition;
                if (localStorage.getItem('fullSidebar') === 'false') {
                    sidebarSizeHandler.showSidebar()
                } else {
                    sidebarSizeHandler.hideSidebar()
                }
            }
        }

        window.addEventListener('load', () => {
            // восстановительный метод после перезагрузки
            sidebarSizeHandler.onLoad()
        });

        hideSidebarToggle.onclick = function () {
            sidebarSizeHandler.onClick()
        }
    }
}
</script>
